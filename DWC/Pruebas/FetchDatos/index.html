<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="fetch.js"></script>
</head>

<body>
    <script>

        let codigos = {
            Bizkaia: {
                ID: 48,
                Ciudades: {
                    Bilbao: 48020,
                    Barakaldo: 48013
                }

            },
            Gipuzkoa: {
                ID: 20,
                Ciudades: {
                    Zarautz: 20079,
                    Irun: 20045,
                    Errenteria: 20067,
                    Donosti: 20069
                }
            },
        }

        let ciudades = new Object()
        let config ={
            headers:{
                'Access-Control-Allow-Origin': 'http:///10.10.17.121:8083'
            }
        }
        
        fetch('http:///10.10.17.121:8083/recibirDatosBase.php', config)
            .then(response => {
                if (!response.ok) {
                    throw new Error("La solicitud no se pudo completar correctamente.");
                }
                return response.json();
            })
            .then(data => {
                console.log(data)
                ciudades = data
            })
        setTimeout(() => {
            ciudades = DatosAleatorios(ciudades)
            for (let ciudad of ciudades) {
                fetch(`http:///10.10.17.121:8083/actualizarBaseDatos.php?ciudad=` + JSON.stringify(ciudad))
                    //`http://10.10.17.121:8083/Aimar/actualizarBaseDatos.php?ciudad=` + JSON.stringify(ciudad)
            }

        }, 1000);
    </script>
</body>

</html>